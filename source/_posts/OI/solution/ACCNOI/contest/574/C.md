---
title: 狗卡（贪心何尝不是最简单的思考呢？）
message: dsfz NOI篇 的密码
tags:
  - accnoi
  - 贪心
  - 题目分析
date: 2024-11-16 14:53:31
---

### [狗卡](http://47.92.197.167:5283/contest/574/problem/3)

- 题目简述，有一个 $n$ 个武将，给出矩阵 $a_{i,0~p_i}$ 表示武将 $i$ 从 $j-1$ 级，升级到 $j$ 级所用的时间，每个武将初始的等级为 $0$，每个时刻收益是所有武将等级和，一共考虑 $m$ 个时刻
- $m=10^{18},\sum{p_i}\le 10^6$
- 题目分析，我自认为这是一道绝世贪心题。
- 基本的：需要分析道，若我们有每次升级的时间序列 $a_i$，则 $ans=\sum{m-a_i}=\sum{m}-\sum{a_i}$ 拆贡献也是基本的。
  - 想法：考虑贪心，当前武将等级为 $r_i$，则用堆维护 $a_{i,r_i+1}$ 的最小值，每次取最小值 $ans+=a_{i,r_i+1}\times \sum{times}$，转移下一状态。
  - 反思：这是错的，若一个大数后面，有一堆巨小的数，我们不一定会先选局部最优解，而是会选择全局最优的这个大树。
- 这步很重要，也很牛
  - 想法：我说假象答案的一种合法解，把每个武将的所有升级之路，分成若干的连续段，这些连续段只会作为以段为整体对答案产生贡献。
  - 进一步：考虑两个段，如何钦定权重呢？那个段在前，那个段又在后。
  - 两个段以前以后，连续的放在一起，对两段之前的没有影响，对两段之后的也没有影响，段中点对答案的影响，形如一段段前缀，顾我们之关心 $\sum a_{i,[l,r]}$，考虑到两段长度可能不同，自然想到平均数除段长，恰好这正好相当于把段中所有的点的点权转为平均数，而我们假设段段不分割。一些都和谐至极
- 现在好像，抓住了什么，于是深挖到底
  - 想法：优秀就要更优秀，每个武将都要尽可能的优秀吧，就是我们要尝试选择一个前缀，使得这个前缀平均数尽可能的小，化为一段，不断划分直至划分完整个序列。
- 于是本题就做完了，对于所有段一起排序，顺序选择即可，因为同一武将前一段优于后一段，所以这样没问题，[具体如下](http://47.92.197.167:5283/submission/260332)。