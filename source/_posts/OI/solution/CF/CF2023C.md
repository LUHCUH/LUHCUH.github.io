---
title: C+K+S
tags:
  - Codeforces
  - 分析题目
date: 2024-11-20 07:47:50
---

### [C+K+S](https://www.luogu.com.cn/problem/CF2023C)

- 题目分析
- 首先，保证联通，就保证任意两点都存在环，我们对于一个图的一个点求出，其他所有点到 $u$ 的距离，距离 $\bmod k$ 的值必然相等否则一定存在环不是 $k$ 的倍数。
- 现在从找到一个 $u$ 走一步到达的点 $v$，走一步，相当于，所有点道 $u$ 的距离再减，就到达了 $v$ 的位置，由于都联通，所以存在即相同，于是我们可以求出任意 $u$ 到 $v$ 的距离是，$dis_{1,v}-dis_{1,u} \bmod k$
- 考虑连边的贡献，相当于，$1$ 图 $u$ 到 $v$，$2$ 图 $x$ 到 $y$ 再加二，改变贡献顺序，相当于 $dis1_{v}-dis2_{x}+dis2_{y}-dis1_{u}$ 相当于又向边 $v$ 到 $x$ 的贡献为二者点权想减，即 $dis1_{v}-dis2_{x}$ 同理，$y$ 连向 $u$ 相当于 $dis2_{y}-dis1_{u}$，而这相当于 $k-2=dis2_{y}-dis1_{u}+dis1_{v}-dis2_{x}$
- 由于每两条边都需要满足条件，所以入变集合，和出边集合权值必然分别相同，于是可做