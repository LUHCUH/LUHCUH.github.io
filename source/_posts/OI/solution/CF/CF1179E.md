---
title: Anya's Simultaneous Exhibition
tags:
  - Codeforces
  - 联通性
date: 2024-11-14 18:31:15
---
### [Anya's Simultaneous Exhibition](https://www.luogu.com.cn/problem/CF1779E)

- 题目描述：
IO 交互题。
- 有 $n$ 个人下棋，他们两两之间对战的胜负是确定的，但你不知道。注意，胜负不具有传递性。
- 你可以进行至多 $2n$ 次询问，询问形式为 `? i s`，其中 $1\le i\le n$，$s$ 是一个长度为 $n$ 的 01 串，$s_j=1$ 表示选择第 $j$ 个人。系统会返回一个值 $x$，表示若 $i$ 与所有被选择的人对战胜利场数。
- 现在要进行 $n-1$ 场淘汰赛，若你能安排每场比赛的对决双方，问哪些人最终可能留下。
- 题解：
- 首先，得知道我不知道的结论，竞赛图锁点后是一条连，显然只有最远的强联通分量才是答案，这里钦定战胜的边是由战胜的人指向败的人。
- 显然链上前边的点一定不指向的点，所以把所有点的初度从大到小排序，最外边的联通块必然属于前半部分，共 $n$ 次操作。
- 先把最后一个点作为最后的联通块，按序查询不在联通块的点是否不存在连向联通块的点，若存在，则把从这个点及其以前的点纳入联通块，又 $n$ 次操作。
- 更近一步的，我们猜想，记录每个点的出度，按序找到以一个点满足 $\sum_{i=1}^m d_i-\binom{m}{2}=m(n-m)$ 的时候就是刚最外边的联通块。故其实只需 $n-1$ 次。
- [参考实现](https://www.luogu.com.cn/article/nt7yl8ey)