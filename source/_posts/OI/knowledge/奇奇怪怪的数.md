---
title: 奇奇怪怪的数
categories:
  - oi知识点
date: 2024-11-14 18:54:27
---

# 组合数学

- $A_n^m=\frac{n!}{(n-m)!}$ 表示在 $n$ 个不同的元素中选出 $m$ 个元素的排列数
- $\binom{n}{m}=C_n^m=\frac{A_n^m}{m!}=\frac{n!}{m!(n-m)!}$ 表示在 $n$ 个不同的元素中选出 $m$ 个元素的方案数

## 例子
- 问题 $1$：有 $n$ 个完全相同的苹果，分到 $m$ 个盘子且没有空盘子的方案数。
	- 问题相当于在一段苹果序列中插入 $m-1$ 个板子，使得苹果被分成 $m$ 份，每一份苹果对应一个盘子。
	- $Ans=C_{n-1}^{m-1}$
- 问题 $2$：存在空盘子的方案数
	- 我们考虑先借来 $m$ 个苹果，然后可以先按问题 $1$ 考虑，之后还回去 $m$ 个苹果
	- $Ans=C_{n+m-1}^{m-1}=C_{n+m-1}^n$
- 问题 $3$：对于第 $i$ 个盘子，至少要有 $a_i$ 的苹果
	- 我们先借 $\sum a_i$ 个苹果，然后变为问题 $2$
	- $Ans=C_{n-\sum a_i+m-1}^{n-\sum a_i}$
- 不相邻的排列：$1 \sim n$ 这 $n$ 个自然数中选 $k$ 个，使得 $k$ 个数中任何两个数都不相邻的方案数
	- 对于每一个选的数，我们可以默认先选择当前数前面的点，而由于开头可以不空所以 $+1$
	- $Ans=C_{n-k+1}^k$

# 常见转换

$$
\binom{n}{m}=\binom{n}{n-m}
$$

- 这相当于从选 $m$ 个球，变成选 $n-m$ 个球，对立的自然为 $m$ 个球，（**对称性**）

$$
\binom{n}{m}=\frac{n}{m}\binom{n-1}{m-1}
$$

- 从地推的角度考虑问题

$$
\binom{n}{m}=\binom{n}{m}+\binom{n-1}{m-1}
$$

- 这是组合数的 $\text O(n^2)$ 递推式

$$
\sum_{i=0}^n\binom{n}{i}=\binom{n}{0}+\binom{n}{1}+\cdots+\binom{n}{n}=2^n
$$

- 可以选 $0\to n$ 的所有数，对于每个数自然可选可不选，$2^n$

$$
[n=0]\Longleftrightarrow \sum_{i=0}^n(-1)^i\binom{n}{i}
$$

- 这种式子一半都很好玩，阐述了很多反演的原理，有事可做替换有意想不到的惊喜，其实就是二项式啦 $(1-1)^n$

$$
\sum_{i=0}^{min(m,k)} \binom{m}{i}\binom{n}{k-i}=\binom{n+m}{k}
$$

- wiki 上说应用于数据结构拆组合数（我没见过），不过前两天到是做过，直接合并组合数的，而往往关注组合数自身的取值，不必被 $min(m,k)$ 吓到，证明的话考虑其组合意义，相当于是要在两个集合中选 $k$ 个数，枚举计算左选 $k$，和右选 $k$ 的方案数

$$
\sum_{i=0}^n\binom{n}{i}^2=\binom{2n}{n}
$$

- 优美的组合数平方和，是前一个上式的特例

$$
\sum_{i=0}^n i\binom{n}{i}=n2^{n-1}
$$

- 又是优美的等差系数，这里给我们启示 $i,i$ 相消不可惜，唯有 $n,n$ 永流传，$i\binom{n}{i}=n\binom{n-1}{i-1}$

$$
\sum_{i=0}^n i^2\binom{n}{i}=n(n+1)2^{n-2}
$$

- 思路同上，$n\sum_{i=0}^{n-1}i\binom{n-1}{i}+n\sum_{i=0}^{n-1}\binom{n-1}{i}=n(n-1)2^{n-2}+n2^{n-1}$，听说还有生成函数解法，待我一一破之

$$
\sum_{i=0}^n\binom{i}{m}=\binom{n+1}{m+1}
$$

![image-20241113093551180](https://image-1311841823.cos.ap-beijing.myqcloud.com/blog/image-20241113093551180.png)

- 类似这样的算前缀和即可。

$$
\binom{n}{r}\binom{r}{k}=\binom{n}{k}\binom{n-k}{r-k}
$$

- 其实我没用过，显然可以用于调换枚举顺序，组合意义理解，$n$ 里选 $r$ 个，$r$ 里选 $k$ 个，倘若我们先确定选的是那 $k$ 个，剩下的就是对 $r$ 计数，$r$ 比 $k$ 多 $r-k$，$n$ 比 $k$ 多 $n-k$，显然有上述等式

$$
F_{n+1}=\sum_{i=0}^n\binom{n-i}{i}
$$

- 斐波那契数列通项公式
