# [冲刺NOI2024模拟13 C 天网(web)](http://47.92.197.167:5283/contest/521)

- 首先我们考虑连通块个数初始时是由一个二元组 $(u,v)$ 且度数为 $0$ 的边组成。
- 我们将上述边称为**关键边**，其余边至少有一个点是关键便的上的点
- 考虑容斥 $Ans=\sum_{t=k}^{\lfloor\frac{n}{2}\rfloor}(-1)^{t-k}\binom{t}{k}g(t)p(t)$
  - 其中 $g(t)$ 是选出至少 $t$ 条关键便的方案数
  - $p(t)$ 是选出 $k$ 至少条关键便的概率
- $g(t)=\binom{n}{2t}(2t-1)!!$
  1. 从 $n$ 个点中选出 $2t$ 个点，用于组成 $t$ 个关键边
  2. 把 $2t$ 个点划分成 $t$ 个点对的方案数
- $p(t)=\frac{(2n-2t-3)!!}{(2n-3)!!}$
  1. 此问题相当于在随机一个选边序列上
  2. 而我们在 $\frac{1}{2}n(n-1)$ 条边上选出了 $t$ 条边
  3. 考虑其他边的限制，若只有一条边中有一个点连向 $t$ 中点，只需要满足在选择序列当前边位置 $>$ $t$ 中那条边出现的位置
  4. 若一条边中有两个点是 $t$ 中点，只需要满足 $>$ 两个 $t$ 中点的边出现最晚的位置即可
  5. 而对于所有情况 $t$ 条边选择的顺序是等地位的，所以先乘 $t!$
  6. $P(1)=\frac{1}{2(n-2)+1}$
  7. $P(2)=P(1)\frac{1}{2(n-2)+1+2(n-4)+1}$
  8. $P(t)=P(t-1)\frac{1}{t(2(n-t)+1)}$
  9. $p(t)=t!P(t)=\frac{(2n-2t-3)!!}{(2n-3)!!}$
- 拼起来 $Ans=\sum_{t=k}^{\lfloor\frac{n}{2}\rfloor}(-1)^{t-k}\binom{t}{k}\binom{n}{2t}(2t-1)!!\frac{(2n-2t-3)!!}{(2n-3)!!}$